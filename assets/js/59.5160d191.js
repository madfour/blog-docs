(window.webpackJsonp=window.webpackJsonp||[]).push([[59],{508:function(s,e,n){"use strict";n.r(e);var t=n(27),a=Object(t.a)({},(function(){var s=this,e=s.$createElement,n=s._self._c||e;return n("ContentSlotsDistributor",{attrs:{"slot-key":s.$parent.slotKey}},[n("ul",[n("li",[n("p",[s._v("关于文件内容")]),s._v(" "),n("p",[s._v("1、只有以 "),n("code",[s._v("VUE_APP_")]),s._v(" 开头的变量将通过 "),n("code",[s._v("webpack.DefinePlugin")]),s._v("静态地嵌入到客户端侧的代码中。")]),s._v(" "),n("p",[s._v("2、"),n("code",[s._v("NODE_ENV")]),s._v(" 和 "),n("code",[s._v("BASE_URL")]),s._v(" 是两个特殊变量，在代码中始终可用。")]),s._v(" "),n("blockquote",[n("p",[n("code",[s._v("NODE_ENV")]),s._v("的值为"),n("code",[s._v("development / production / test")]),s._v(" 中的一个。具体的值取决于应用运行的模式")]),s._v(" "),n("p",[n("code",[s._v("BASE_URL")]),s._v("会和 "),n("code",[s._v("vue.config.js")]),s._v(" 中的 "),n("code",[s._v("publicPath")]),s._v(" 选项相符，即你的应用会部署到的基础路径。")])])]),s._v(" "),n("li",[n("p",[s._v("配置文件有")]),s._v(" "),n("div",{staticClass:"language-ruby line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-ruby"}},[n("code",[n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("env                "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# （serve 默认的本地开发环境配置）全局默认配置文件,任何环境都会加载的配置文件")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("env"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("development    "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# （serve 默认的本地开发环境配置）开发环境下的配置文件")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("env"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("production     "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# （build 默认的环境配置（正式服务器））生产环境下的配置文件")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("env"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("[")]),s._v("model"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("]")]),s._v("        "),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("# 自定义 build 环境配置文件")]),s._v("\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br")])])]),s._v(" "),n("li",[n("p",[s._v("文件加载")]),s._v(" "),n("p",[s._v("1、根据启动命令vue会自动加载对应的环境，vue是根据文件名进行加载")]),s._v(" "),n("p",[s._v("2、自定义环境文件的启动：要通过在 "),n("code",[s._v("package.json")]),s._v(" 里的 "),n("code",[s._v("scripts")]),s._v(" 配置项中添加"),n("code",[s._v("–mode xxx")]),s._v(" 来选择不同环境。")]),s._v(" "),n("p",[s._v("例如"),n("code",[s._v(".env.staging")]),s._v("文件，修改 "),n("code",[s._v("package.json")]),s._v("：")]),s._v(" "),n("div",{staticClass:"language-javascript line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-javascript"}},[n("code",[n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"scripts"')]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("{")]),s._v("\n  "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"build"')]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"vue-cli-service build"')]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(",")]),s._v("\n  "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"build:stage"')]),n("span",{pre:!0,attrs:{class:"token operator"}},[s._v(":")]),s._v(" "),n("span",{pre:!0,attrs:{class:"token string"}},[s._v('"vue-cli-service build --mode staging"')]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("}")]),s._v("\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br"),n("span",{staticClass:"line-number"},[s._v("4")]),n("br")])]),n("p",[s._v("Tips: 即使不是生产环境，也可以将模式设置为 production ，这样可以获得 webpack 默认的打包优化。")])]),s._v(" "),n("li",[n("p",[s._v("应用")]),s._v(" "),n("p",[s._v("比如在测试环境和生产环境， publicPath参数（部署应用包时的基本 URL）可能不同。遇到这种情况就可以在 "),n("code",[s._v("vue.config.js")]),s._v(" 文件中，将 "),n("code",[s._v("publicPath")]),s._v(" 参数设置为："),n("code",[s._v("publicPath: process.env.BASE_URL")])]),s._v(" "),n("p",[s._v("设置之后，再在每个环境文件下对 "),n("code",[s._v("BASE_URL")]),s._v(" 进行配置。这样就不用每次打包时都去更改 "),n("code",[s._v("vue.config.js")]),s._v(" 文件了")])]),s._v(" "),n("li",[n("p",[s._v("环境文件示例：\n.env.development")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v('NODE_ENV = "development"\nVUE_APP_BASE_API = "开发环境API路径"\n')])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br")])]),n("p",[s._v(".env.production")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v('NODE_ENV = "production"\nVUE_APP_BASE_API = "生产环境API路径"\n')])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br")])]),n("p",[s._v(".env.staging")]),s._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[s._v('NODE_ENV = "production"\nVUE_APP_BASE_API = "staging 下的API路径"\n')])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br")])]),n("p",[s._v("在应用代码中使用：")]),s._v(" "),n("div",{staticClass:"language-js line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-js"}},[n("code",[s._v("console"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("log")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("process"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("env"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\nconsole"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),n("span",{pre:!0,attrs:{class:"token function"}},[s._v("log")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v("(")]),s._v("process"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),s._v("env"),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(".")]),n("span",{pre:!0,attrs:{class:"token constant"}},[s._v("VUE_APP_BASE_API")]),n("span",{pre:!0,attrs:{class:"token punctuation"}},[s._v(")")]),s._v("\n"),n("span",{pre:!0,attrs:{class:"token comment"}},[s._v("// 这样就能取到相应的环境下对应的值")]),s._v("\n")])]),s._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[s._v("1")]),n("br"),n("span",{staticClass:"line-number"},[s._v("2")]),n("br"),n("span",{staticClass:"line-number"},[s._v("3")]),n("br")])])]),s._v(" "),n("li",[n("p",[s._v("优先级：")]),s._v(" "),n("p",[s._v("为一个特定模式准备的环境文件 (例如 "),n("code",[s._v(".env.production")]),s._v(") 将会比一般的环境文件 (例如 "),n("code",[s._v(".env")]),s._v(") 拥有更高的优先级。若环境文件发生变化,需重启服务才能生效")])]),s._v(" "),n("li",[n("p",[s._v("文件加载")]),s._v(" "),n("p",[n("code",[s._v(".env .env.development .env.production")]),s._v("文件会在"),n("code",[s._v("Vue")]),s._v("项目  启动后，无论什么环境都加载"),n("code",[s._v(".env")]),s._v("中的内容，然后"),n("strong",[s._v("根据"),n("code",[s._v("Node")]),s._v("环境变量"),n("code",[s._v("NODE_ENV")]),s._v("的值来选择加载"),n("code",[s._v("development")]),s._v("还是"),n("code",[s._v("production")])]),s._v("。在按顺序加载文件时，"),n("code",[s._v("Vue")]),s._v("会把后一个加载的文件内容和前面加载的文件内容进行比较，如果存在变量名相同，那么它会采用"),n("strong",[s._v("后一个文件里的变量值为变量的最终值")]),s._v("。")])])])])}),[],!1,null,null,null);e.default=a.exports}}]);