---
title: 校验方式和使用
date: 2021-09-06 20:22:12
permalink: /js/297183/
categories:
  - JavaScript
tags:
  - JavaScript
---
校验代码段/常用正则。

<!-- more -->
## 一、代码段

### 判断字符串是否是 https?:|mailto:|tal: 开头的

```javascript
/**
 * @param {string} path  判断字符串是否是https?:|mailto:|tal: 开头的
 * @returns {Boolean}
 */
export function isExternal(path) {
  return /^(https?:|mailto:|tel:)/.test(path)
}
```

### 检验字符串是否是 admin editor

```javascript
/**
 * @param {string} str  //检验字符串是否是 admin  editor
 * @returns {Boolean}
 */
export function validUsername(str) {
  const valid_map = ['admin', 'editor']
  return valid_map.indexOf(str.trim()) >= 0
}
```

### 判断都是大/小写字母

```javascript
/**
 * @param {string} str  判断都是小写字母
 * @returns {Boolean}
 */
export function validLowerCase(str) {
  const reg = /^[a-z]+$/
  return reg.test(str)
}

/**
 * @param {string} str  判断都是大写字母
 * @returns {Boolean}
 */
export function validUpperCase(str) {
  const reg = /^[A-Z]+$/
  return reg.test(str)
}

/**
 * @param {string} str  判断是否是字母
 * @returns {Boolean}
 */
export function validAlphabets(str) {
  const reg = /^[A-Za-z]+$/
  return reg.test(str)
}
```

### 校验邮箱

```javascript
/**
 * @param {string} email  校验邮箱
 * @returns {Boolean}
 */
export function validEmail(email) {
  const reg = /^(([^<>()\[\]\\.,;:\s@"]+(\.[^<>()\[\]\\.,;:\s@"]+)*)|(".+"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/
  return reg.test(email)
}
```

### 判断是否字符串

```javascript
/**
 * @param {string} str 判断是否字符串
 * @returns {Boolean}
 */
export function isString(str) {
  if (typeof str === 'string' || str instanceof String) {
    return true
  }
  return false
}
```

### 判断是否是数组

```javascript
/**
 * @param {Array} arg  判断是否是数组
 * @returns {Boolean}
 */
export function isArray(arg) {
  if (typeof Array.isArray === 'undefined') {
    return Object.prototype.toString.call(arg) === '[object Array]'
  }
  return Array.isArray(arg)
}
```

## 二、常用正则
### 修饰符

| 修饰符 |                          描述                          |
| :----- | :----------------------------------------------------: |
| i      |                执行对大小写不敏感的匹配                |
| g      | 执行全局匹配（查找所有匹配而非在找到第一个匹配后停止） |
| m      |                执行对大小写不敏感的匹配                |

### 中括号

中括号用于查找某个范围内的字符：

| 表达式  |               描述               |
| :------ | :------------------------------: |
| [^abc]  |   查找任何不在方括号之间的字符   |
| [0-9]   |     查找任何从 0 至 9 的数字     |
| [a-z]   | 查找任何从小写 a 到小写 z 的字符 |
| [A-Z]   | 查找任何从大写 A 到大写 Z 的字符 |
| [A-z]   | 查找任何从大写 A 到小写 z 的字符 |
| [adgk]  |    查找给定集合 内 的任何字符    |
| [^adgk] |    查找给定集合 外 的任何字符    |

### 元字符: 指拥有特殊含义的字符

| 表达式 |                   描述                    |
| :----- | :---------------------------------------: |
| .      |     查找单个字符，除了换行和行结束符      |
| \w     |               查找单词字符                |
| \W     |              查找非单词字符               |
| \d     |                 查找数字                  |
| \D     |              查找非数字字符               |
| \s     |               查找空白字符                |
| \S     |              查找非空白字符               |
| \b     |               匹配单词边界                |
| \B     |              匹配非单词边界               |
| \0     |               查找 NUL 字符               |
| \n     |                查找换行符                 |
| \f     |                查找换页符                 |
| \r     |                查找回车符                 |
| \t     |                查找制表符                 |
| \v     |              查找垂直制表符               |
| \xxx   |       查找以八进制数 xxx 规定的字符       |
| \xdd   |      查找以十六进制数 dd 规定的字符       |
| \uxxxx | 查找以十六进制数 xxxx 规定的 Unicode 字符 |

### 量词

| 表达式 |                  描述                   |
| :----- | :-------------------------------------: |
| n+     |     匹配任何包含至少一个 n 的字符串     |
| n*     |    匹配任何包含零个或多个 n 的字符串    |
| n?     |    匹配任何包含零个或一个 n 的字符串    |
| n{X}   |     匹配包含 X 个 n 的序列的字符串      |
| n{X,Y} |   匹配包含 X 至 Y 个 n 的序列的字符串   |
| n{X,}  |   匹配包含至少 X 个 n 的序列的字符串    |
| n$     |        匹配任何结尾为 n 的字符串        |
| ^n     |        匹配任何开头为 n 的字符串        |
| ?=n    |  匹配任何其后紧接指定字符串 n 的字符串  |
| ?!n    | 匹配任何其后没有紧接指定字符串 n 的字符 |



### 一、校验数字的表达式

数字：`^[0-9]*$`

n位的数字：`^\d{n}$`

至少n位的数字：`^\d{n,}$`

m-n位的数字：`^\d{m,n}$`

零和非零开头的数字：`^(0|[1-9][0-9]*)$`

非零开头的最多带两位小数的数字：`^([1-9][0-9]*)+(.[0-9]{1,2})?$`

带1-2位小数的正数或负数：`^(\-)?\d+(\.\d{1,2})?$`

正数、负数、和小数：`^(\-|\+)?\d+(\.\d+)?$`

有两位小数的正实数：`^[0-9]+(.[0-9]{2})?$`

有1~3位小数的正实数：`^[0-9]+(.[0-9]{1,3})?$`

非零的正整数：`^[1-9]\d*$ 或 ^([1-9][0-9]*){1,3}$ 或 ^\+?[1-9][0-9]*$`

非零的负整数：`^\-[1-9][]0-9″*$ 或 ^-[1-9]\d*$`

非负整数：`^\d+$ 或 ^[1-9]\d*|0$`

非正整数：`^-[1-9]\d*|0$ 或 ^((-\d+)|(0+))$`

非负浮点数：`^\d+(\.\d+)?$ 或 ^[1-9]\d*\.\d*|0\.\d*[1-9]\d*|0?\.0+|0$`

非正浮点数：`^((-\d+(\.\d+)?)|(0+(\.0+)?))$ 或 ^(-([1-9]\d*\.\d*|0\.\d*[1-9]\d*))|0?\.0+|0$`

正浮点数：`^[1-9]\d*\.\d*|0\.\d*[1-9]\d*$ 或 ^(([0-9]+\.[0-9]*[1-9][0-9]*)|([0-9]*[1-9][0-9]*\.[0-9]+)|([0-9]*[1-9][0-9]*))$`

负浮点数：`^-([1-9]\d*\.\d*|0\.\d*[1-9]\d*)$ 或 ^(-(([0-9]+\.[0-9]*[1-9][0-9]*)|([0-9]*[1-9][0-9]*\.[0-9]+)|([0-9]*[1-9][0-9]*)))$`

浮点数：`^(-?\d+)(\.\d+)?$ 或 ^-?([1-9]\d*\.\d*|0\.\d*[1-9]\d*|0?\.0+|0)$`

### 二、校验字符的表达式

汉字：`^[\u4E00-\u9FA5]{0,}$`

2~4个汉字：`^[/u4E00-/u9FA5]{2,4}$`

英文和数字：`^[A-Za-z0-9]+$ 或 ^[A-Za-z0-9]{4,40}$`

长度为3-20的所有字符：`^.{3,20}$`

由26个英文字母组成的字符串：`^[A-Za-z]+$`

由26个大写英文字母组成的字符串：`^[A-Z]+$`

由26个小写英文字母组成的字符串：`^[a-z]+$`

由数字和26个英文字母组成的字符串：`^[A-Za-z0-9]+$`

由数字、26个英文字母或者下划线组成的字符串：`^\w+$ 或 ^\w{3,20}$`

中文、英文、数字包括下划线：`^[\u4E00-\u9FA5A-Za-z0-9_]+$`

中文、英文、数字但不包括下划线等符号：`^[\u4E00-\u9FA5A-Za-z0-9]+$ 或 ^[\u4E00-\u9FA5A-Za-z0-9]{2,20}$`

是否含有^%&',;=?$\”等字符：`[^%&',;=?$\x22]+`

禁止输入含有~的字符：`[^~\x22]+`


### 三、特殊需求表达式

邮箱Email地址：
&emsp;&emsp;  `^\w+([-+.]\w+)*@\w+([-.]\w+)*\.\w+([-.]\w+)*$`
&emsp;&emsp;  ^[a-zA-Z0-9_-]+@[a-zA-Z0-9_-]+(\.[a-zA-Z0-9_-]+)+$

域名：`[a-zA-Z0-9][-a-zA-Z0-9]{0,62}(/.[a-zA-Z0-9][-a-zA-Z0-9]{0,62})+/.?`

网址URL(InternetURL)：`[a-zA-z]+://[^\s]* 或 ^http://([\w-]+\.)+[\w-]+(/[\w-./?%&=]*)?$`

手机号码：`^(13[0-9]|14[5|7]|15[0|1|2|3|5|6|7|8|9]|18[0|1|2|3|5|6|7|8|9])\d{8}$`

电话号码(“XXX-XXXXXXX”、”XXXX-XXXXXXXX”、”XXX-XXXXXXX”、”XXX-XXXXXXXX”、”XXXXXXX”和”XXXXXXXX)：`^($$\d{3,4}-)|\d{3.4}-)?\d{7,8}$`

国内电话号码(0511-4405222、021-87888822)：`\d{3}-\d{8}|\d{4}-\d{7}`

身份证号(15位、18位数字)：`^\d{15}|\d{18}$`

短身份证号码(数字、字母x结尾)：`^([0-9]){7,18}(x|X)?$ 或 ^\d{8,18}|[0-9x]{8,18}|[0-9X]{8,18}?$`

帐号是否合法(字母开头，允许5-16字节，允许字母数字下划线)：`^[a-zA-Z][a-zA-Z0-9_]{4,15}$`

密码(以字母开头，长度在5~17之间，只能包含字母、数字和下划线)：`^[a-zA-Z]\w{5,17}$`

强密码(必须包含大小写字母和数字的组合，不能使用特殊字符，长度在8-10之间)：`^(?=.*\d)(?=.*[a-z])(?=.*[A-Z]).{8,10}$`

日期格式：`^\d{4}-\d{1,2}-\d{1,2}`

一年的12个月(01～09和1～12)：`^(0?[1-9]|1[0-2])$`

一个月的31天(01～09和1～31)：`^((0?[1-9])|((1|2)[0-9])|30|31)$`

xml文件：`^([a-zA-Z]+-?)+[a-zA-Z0-9]+\\.[x|X][m|M][l|L]$`

双字节字符：`[^\x00-\xff]` (包括汉字在内，可以用来计算字符串的长度(一个双字节字符长度计2，ASCII字符计1)) 

空白行的正则表达式：`\n\s*\r` (可以用来删除空白行) 

HTML标记的正则表达式：`<(\S*?)[^>]*>.*?</\1>|<.*? />` (网上流传的版本太糟糕，上面这个也仅仅能部分，对于复杂的嵌套标记依旧无能为力) 

首尾空白字符的正则表达式：`^\s*|\s*$或(^\s*)|(\s*$)` (可以用来删除行首行尾的空白字符(包括空格、制表符、换页符等等)，非常有用的表达式) 

腾讯QQ号：`[1-9][0-9]{4,}` (腾讯QQ号从10000开始) 

中国邮政编码：`[1-9]\d{5}(?!\d)` (中国邮政编码为6位数字) 

IP地址：`\d+\.\d+\.\d+\.\d+` (提取IP地址时有用) 

IP地址：`((?:(?:25[0-5]|2[0-4]\\d|[01]?\\d?\\d)\\.){3}(?:25[0-5]|2[0-4]\\d|[01]?\\d?\\d)) `

### 四、钱的输入格式

有四种钱的表示形式:”10000.00″ 和 “10,000.00″, 和没有 “分” 的 “10000″ 和 “10,000″：`^[1-9][0-9]*$`

表示任意一个不以0开头的数字，但是，这也意味着一个字符”0″不通过，所以我们采用下面的形式：`^(0|[1-9][0-9]*)$`

一个0或者一个不以0开头的数字.允许开头有一个负号：`^(0|-?[1-9][0-9]*)$`

这表示一个0或者一个可能为负的开头不为0的数字.让用户以0开头好了.把负号的也去掉，因为钱总不能是负的吧.下面我们要加的是说明可能的小数部分：`^[0-9]+(.[0-9]+)?$`

必须说明的是，小数点后面至少应该有1位数，所以”10.”是不通过的，但是 “10″ 和 “10.2″ 是通过的：`^[0-9]+(.[0-9]{2})?$`

这样我们规定小数点后面必须有两位，如果你认为太苛刻了，可以这样：`^[0-9]+(.[0-9]{1,2})?$`

这样就允许用户只写一位小数。下面我们该考虑数字中的逗号了，我们可以这样：`^[0-9]{1,3}(,[0-9]{3})*(.[0-9]{1,2})?$`

1到3个数字，后面跟着任意个 逗号+3个数字，逗号成为可选，而不是必须：`^([0-9]+|[0-9]{1,3}(,[0-9]{3})*)(.[0-9]{1,2})?$`


备注：”+”可以用”*”替代。在用函数时去掉那个反斜杠，一般的错误都在这里.


