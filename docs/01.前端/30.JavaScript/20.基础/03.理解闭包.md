---
title: JS - 理解闭包
date: 2022-04-27 12:02:35
permalink: /js/605a68/
categories:
  - JavaScript
tags:
  - JavaScript
---

> 要理解闭包，就必须理解js的作用域和作用域链

## 理解闭包

**闭包允许函数访问并操作函数外部的变量**。只要变量或函数存在于声明函数时的作用域内，闭包即可使函数能够访问这些变量或函数。

**创建闭包**最常见的方式就是，**在一个函数内部创建另一个函数**。

一个简单的闭包示例：
```js
function foo(){
  var a = 1       // 在全局作用域中定义一个变量

  function bar(){ // 在全局作用域中声明函数
    console.log(a)
  }
}

var fn = foo()

fn()   // 1 执行该函数
fn()   // 1
```


```js
var a = 1       // 在全局作用域中定义一个变量

function foo(){ // 在全局作用域中声明函数
  a++
  console.log(a)
}

foo()   // 2 执行该函数
foo()   // 3
foo()   // 4
```
这样的代码写过很多次，但却没意识到其实我们正在创建一个闭包。

闭包的实现原理，其实是利用了作用域链的特性，我们都知道作用域链就是在当前执行环境下访问某个变量时，如果不存在就一直向外层寻找，最终寻找到最外层也就是全局作用域，这样就形成了一个链条。






