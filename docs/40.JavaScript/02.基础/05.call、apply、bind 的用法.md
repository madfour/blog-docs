---
title: call、apply、bind
date: 2020-08-27 20:44:49
permalink: /JavaScript/498083/
categories:
  - 前端
  - JavaScript
tags:
  - JavaScript
---

`call`、`apply` 与 `bind` 都用于改变 `this` 绑定。但 `call`、`apply` 在改变 `this` 指向的同时还会执行函数，而 `bind` 在改变 `this` 后是返回一个全新的 `boundFunction` 绑定函数(这也是为什么`bind`后加`()`的原因)。

<!-- more -->

## 区别

> 三者都是用于改变函数体内 `this` 的指向。
> 
> 其中`call、apply`会立即执行，`bind`返回的是一个函数，需调用后执行。
> 
> 第二个参数是传入要执行的方法中的参数，`call、bind`是独立传递参数，`apply`是以数组传递参数的。

<!-- https://blog.csdn.net/Chengbo_X/article/details/83107808?ops_request_misc=&request_id=&biz_id=102&utm_term=call%E3%80%81apply%E4%B8%8Ebind&utm_medium=distribute.pc_search_result.none-task-blog-2~all~sobaiduweb~default-0-83107808.pc_search_all_es&spm=1018.2226.3001.4187 -->

<!-- https://blog.csdn.net/hexinyu_1022/article/details/82795517?ops_request_misc=%257B%2522request%255Fid%2522%253A%2522163283589016780261945440%2522%252C%2522scm%2522%253A%252220140713.130102334..%2522%257D&request_id=163283589016780261945440&biz_id=0&utm_medium=distribute.pc_search_result.none-task-blog-2~all~baidu_landing_v2~default-2-82795517.pc_search_all_es&utm_term=call%E3%80%81apply%E4%B8%8Ebind&spm=1018.2226.3001.4187 -->

**区别是**：bind不会立即调用，而是返回一个新函数，称为绑定函数，其内的this指向为创建它时传入bind的第一个参数，而传入bind的第二个及以后的参数作为原函数的参数来调用原函数。


## 使用

1、需要改变某个函数的`this`指向时  
2、当参数较少时可以使用`call`，参数较多可以使用`apply`以数组的方式传递  
3、当需要重复调用时，可以使用`bind`新定义一个方法
语法:
`f.call(obj, arg1, arg2...)`,
`f.bind(obj, arg1, arg2,...)()`,
`f.apply(obj, [arg1, arg2, .])`

### 重定义 `this` 这个对象的

```javascript
var name = '苏三',
  age = 23
var obj = {
  name: '苏乞儿',
  objAge: this.age,
  fnc: function() {
    console.log(this.name + '，年龄，' + this.age)
  },
}

var obj2 = {
  name: '苏四',
  age: 33,
}

obj.fnc.call(obj2) // 苏四，年龄，33
obj.fnc.apply(obj2) // 苏四，年龄，33
obj.fnc.bind(obj2)() // 苏四，年龄，33
```

可以看到这里 `apply` 和 `call` 是一样的，但是 `bind` 返回的是一个函数，所以需要调用后才执行 `fnc` 方法。

### 传参区别

```javascript
var name = '苏三',
  age = 23
var obj = {
  name: '苏乞儿',
  objAge: this.age,
  fnc: function(c, t) {
    console.log(this.name + '，年龄，' + this.age + '，地区：', c, t)
  },
}

var obj2 = {
  name: '苏四',
  age: 33,
}

obj.fnc.call(obj2, '河南', '登封县') // 苏四，年龄，33，地区： 河南 登封县
obj.fnc.apply(obj2, ['河南', '登封县']) // 苏四，年龄，33，地区： 河南 登封县
obj.fnc.bind(obj2, '河南', '登封县')() // 苏四，年龄，33，地区： 河南 登封县
obj.fnc.bind(obj2, ['河南', '登封县'])() // 苏四，年龄，33，地区： (2) ["河南", "登封县"] undefined
```

可以看出三个函数的第一个参数都是 `this` 的指向对象。

而第二个参数的查边就是： `call` 和 `bind` 都是独立传递，`apply`则是以 数组 方式传递参数的。三者的参数允许是各种类型，包括函数 、 `object` 等等。

## 例题：修改 this 指向

> 函数中`this`原本指向是`windows`,通过以下方法改变`this`指向

```js
// apply
function applyThis(f, oTarget) {
  return function() {
    return f.apply(oTarget, arguments)
  }
}

// bind
function bindThis(f, oTarget) {
  return f.bind(oTarget)
}

// call
function callThis(f, oTarget) {
  return function() {
    return f.call(oTarget, ...arguments)
  }
}
```
