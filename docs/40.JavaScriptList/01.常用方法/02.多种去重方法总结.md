---
title: 多种去重方法总结
date: 2020-03-23 20:05:19
permalink: /pages/7d4e31/
categories:
  - 前端
  - JavaScript
tags:
  - JavaScript
author:
  name: madfour
  link: https://github.com/madfour
---

操作数组去重的方法大致分为两类：一时两层循环法；二是利用语法自身键不可重复性。
其它的都是用了语言的 api，算不上单独的方法，比如`indexof`和`includes`两层循环 都是一类。

<!-- more -->

## 1、使用 `new Set()`（ES6 语法）

ES6 的 Set 数据结构，代码简洁，性能高。

```js
function unique(arr){
    return Array.from(new Set(arr)
    //可简化为：return [...new Set(arr)]
}
// 去掉“{}”空对象
```

## 2、`for...of`（ES6 语法）

是 ES6 标准中**性能最高**的数组去重方法

```js
function unique(arr) {
  let result = []
  let obj = {}
  for (let i of arr) {
    if (!obj[i]) {
      result.push(i)
      obj[i] = 1
    }
  }
  return result
}
```

## 3、`IndexOf`

新建一个空的结果数组，for 循环原数组，判断结果数组是否存在当前元素，如果有相同的值则跳过，不相同则 push 进数组。

```js
function unique(arr) {
  if (!Array.isArray(arr)) {
    console.log('type error!')
    return
  }
  var array = []
  for (var i = 0; i < arr.length; i++) {
    if (array.indexOf(arr[i]) === -1) {
      array.push(arr[i])
    }
  }
  return array
}
```

## 4、利用`filter`

```js
function unique(arr) {
  return arr.filter((item, index) => {
    return arr.indexOf(item) === index
  })
}
```

## 5、双层循环 + `splice`

双层循环，外层循环元素，内层循环时比较值。值相同时，则删去这个值。

```js
function unique(arr) {
  // 性能最差
  for (let i = 0, len = arr.length; i < len; i++) {
    for (let j = i + 1; j < len; j++) {
      if (arr[i] == arr[j]) {
        arr.splice(j, 1)
        // splice 会改变数组长度，所以要将数组长度 len 和下标 j 减一
        len--
        j--
      }
    }
  }
  return arr
}
```
